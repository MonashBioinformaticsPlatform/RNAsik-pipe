#!/bin/bash

#NOTE that $BASH_SOURCE variable doesn't exist on MacOS apparently
sik_origin=$(dirname "${BASH_SOURCE[0]}")
default_bds_config="$(which bds).config"
bds_config="${RNASIK_BDS_CONFIG:-$default_bds_config}"

bds_args=""
n_args=${#@}
sik_args=${@}

if [[ ${@} =~ "VERBOSE" ]]
then
  bds_args="-log -reportHtml -reportYaml"
  sik_args=${@:2:${n_args}}
elif [[ ${@} =~ "DEBUG" ]]
then
  bds_args="-debug"
  sik_args=${@:2:${n_args}}
fi

bds -c ${bds_config} ${bds_args} ${sik_origin}/../src/RNAsik.bds ${sik_args}
